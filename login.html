<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Login | NumerAI ‚Äì Enter Your Cosmic Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Login to NumerAI and access your personalized Vedic numerology readings and face analysis.">

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;500&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="login.css">
  <script src="api-config.js"></script>
</head>

<body>

  <a href="index.html" class="back">‚Üê Back to Home</a>

  <div class="card">

    <div class="icon">‚òÄ</div>
    <h2>Welcome Back</h2>
    <div class="subtitle">Enter your credentials to continue</div>

    <input type="email" id="loginEmail" placeholder="Email Address">

    <div class="input-group">
      <input type="password" id="password" placeholder="Password">
      <span class="eye" onclick="toggle()">üëÅ</span>
    </div>

    <div class="links">
      <a href="#">Forgot password?</a>
    </div>

    <button class="btn" id="loginBtn">Enter the Portal</button>

    <div class="footer">
      New to the cosmic realm?
      <a href="signup.html">Create Account</a>
    </div>

  </div>

  <script>
    function toggle() {
      const p = document.getElementById("password");
      p.type = p.type === "password" ? "text" : "password";
    }

    const loginBtn = document.getElementById("loginBtn");
    loginBtn.addEventListener("click", async () => {
      const email = document.getElementById("loginEmail").value.trim();
      const password = document.getElementById("password").value;

      if (!email || !password) {
        alert("Please enter email and password");
        return;
      }

      try {
        const res = await fetch(`${window.API_BASE_URL}/auth/login`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, password })
        });

        const data = await res.json();
        if (!res.ok || !data.success) {
          alert(data.detail || "Login failed");
          return;
        }

        localStorage.setItem("vedic_token", data.token);
        window.location.href = "index.html";
      } catch (err) {
        alert("Server not reachable. Please make sure the backend is running.");
      }
    });
  </script>

</body>

</html>